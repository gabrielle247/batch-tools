#!/bin/bash
LOG_DIR="$HOME/batch_tech/logs"
echo -e "\033[1;34m=== Active Batch Tech Downloads ===\033[0m"

# Check specifically for yt-dlp processes
if pgrep -f "yt-dlp" > /dev/null; then
    # List them cleanly
    pgrep -a -f "yt-dlp" | while read -r pid cmd; do
        # Extract the URL or Title from the command to make it readable
        # This greps the command line for the url or title
        echo "ðŸ”„ PID $pid: Working..."
    done
    
    echo -e "\n\033[1;32m(Detailed logs are being written to $LOG_DIR)\033[0m"
    # Show the last few lines of the most recent log file to show progress
    LATEST_LOG=$(ls -t "$LOG_DIR"/*.log 2>/dev/null | head -n1)
    if [ -n "$LATEST_LOG" ]; then
        echo -e "\n\033[1;30m--- Latest Activity ($LATEST_LOG) ---\033[0m"
        tail -n 2 "$LATEST_LOG"
    fi
else
    echo "ðŸ’¤ No active downloads."
fi
